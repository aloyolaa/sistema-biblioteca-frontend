<div>
  <button type="button" name="back" [routerLink]="['/prestamos-materiales']">
    Volver
  </button>
</div>
<div>
  <form>
    <label for="fechaPrestamo">Fecha de Prestamo</label>
    <div>
      <input
        type="datetime-local"
        id="fechaPrestamo"
        name="fechaPrestamo"
        [(ngModel)]="prestamo.fechaPrestamo"
      />
    </div>
    <div *ngIf="errors.fechaPrestamo">
      {{ errors.fechaPrestamo }}
    </div>
    <label for="dni">Docente</label>
    <div>
      <input type="text" id="dni" name="dni" [(ngModel)]="dni" />
    </div>
    <div>
      <button type="submit" (click)="getOneByDni()" [disabled]="!dni">
        Buscar Docente
      </button>
    </div>
    <div *ngIf="errors.docente">
      {{ errors.docente }}
    </div>
    <div>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Apellido</th>
            <th>Nombre</th>
            <th>Dni</th>
            <th>Teléfono</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ docente.id }}</td>
            <td>{{ docente.apellido }}</td>
            <td>{{ docente.nombre }}</td>
            <td>{{ docente.dni }}</td>
            <td>{{ docente.telefono }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <label for="grado">Grado</label>
    <div>
      <select name="grado" id="grado" [(ngModel)]="prestamo.grado">
        <option [ngValue]="undefined">-- Seleccionar --</option>
        <option [ngValue]="1">1°</option>
        <option [ngValue]="2">2°</option>
        <option [ngValue]="3">3°</option>
        <option [ngValue]="4">4°</option>
        <option [ngValue]="5">5°</option>
        <option [ngValue]="6">6°</option>
      </select>
    </div>
    <div *ngIf="errors.grado">
      {{ errors.grado }}
    </div>
    <label for="seccion">Sección</label>
    <div>
      <select name="seccion" id="seccion" [(ngModel)]="prestamo.seccion">
        <option value="undefined">-- Seleccionar --</option>
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="E">E</option>
        <option value="F">F</option>
        <option value="G">G</option>
        <option value="H">H</option>
        <option value="I">I</option>
        <option value="J">J</option>
        <option value="K">K</option>
      </select>
    </div>
    <div *ngIf="errors.seccion">
      {{ errors.seccion }}
    </div>
    <label for="codigo">Código del Material</label>
    <div>
      <input type="text" id="codigo" name="codigo" [(ngModel)]="codigo" />
    </div>
    <div>
      <button type="submit" (click)="getOneByCodigo()" [disabled]="!codigo">
        Buscar Material
      </button>
    </div>
    <div>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Código</th>
            <th>Nombre</th>
            <th>Medidas</th>
            <th>Area</th>
            <th>Disponibles</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ material.id }}</td>
            <td>{{ material.codigo }}</td>
            <td>{{ material.nombre }}</td>
            <td>{{ material.medidas }}</td>
            <td>{{ material.area.nombre }}</td>
            <td>{{ ejemplaresDisponibles }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div>
      <label for="cantidad">Cantidad</label>
      <div>
        <input
          type="number"
          id="cantidad"
          name="cantidad"
          [(ngModel)]="cantidad"
          min="1"
        />
      </div>
      <div *ngIf="cantidad <= 0">La cantidad mínima es 1</div>
      <div>
        <button
          type="submit"
          (click)="getAllByMaterial()"
          [disabled]="!cantidad"
        >
          Buscar Ejemplares
        </button>
      </div>
    </div>
    <div>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Código Material</th>
            <th>Título</th>
            <th>Número</th>
            <th>Estado</th>
            <th>Eliminar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ejemplar of ejemplares">
            <td>{{ ejemplar.id }}</td>
            <td>{{ ejemplar.material.codigo }}</td>
            <td>{{ ejemplar.material.nombre }}</td>
            <td>{{ ejemplar.numero }}</td>
            <td>{{ ejemplar.estado }}</td>
            <td>
              <button
                class="btn btn-danger btn-sm"
                (click)="deleteEjemplar(ejemplar.id)"
              >
                X
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div *ngIf="errors.detalle">
      {{ errors.detalle }}
    </div>
    <div>
      <textarea
        id="descripcion"
        name="descripcion"
        [(ngModel)]="prestamo.descripcion"
      >
      </textarea>
    </div>
    <div *ngIf="errors.descripcion">
      {{ errors.descripcion }}
    </div>
    <div>
      <button type="submit" (click)="save()">Guardar</button>
    </div>
  </form>
</div>

<!-- <div>
  <button type="button" name="back" [routerLink]="['/prestamos-materiales']">
    Volver
  </button>
</div>
<div>
  <form>
    <label for="fechaPrestamo">Fecha de Prestamo</label>
    <div>
      <input
        type="datetime-local"
        id="fechaPrestamo"
        name="fechaPrestamo"
        [(ngModel)]="prestamo.fechaPrestamo"
      />
    </div>
    <div *ngIf="errors.fechaPrestamo">
      {{ errors.fechaPrestamo }}
    </div>
    <label for="dni">Docente</label>
    <div>
      <input type="text" id="dni" name="dni" [(ngModel)]="dni" />
    </div>
    <div>
      <button type="submit" (click)="getOneByDni()" [disabled]="!dni">
        Buscar Docente
      </button>
    </div>
    <div *ngIf="errors.docente">
      {{ errors.docente }}
    </div>
    <div>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Apellido</th>
            <th>Nombre</th>
            <th>Dni</th>
            <th>Teléfono</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ docente.id }}</td>
            <td>{{ docente.apellido }}</td>
            <td>{{ docente.nombre }}</td>
            <td>{{ docente.dni }}</td>
            <td>{{ docente.telefono }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <label for="grado">Grado</label>
    <div>
      <select name="grado" id="grado" [(ngModel)]="prestamo.grado">
        <option [ngValue]="undefined">-- Seleccionar --</option>
        <option [ngValue]="1">1°</option>
        <option [ngValue]="2">2°</option>
        <option [ngValue]="3">3°</option>
        <option [ngValue]="4">4°</option>
        <option [ngValue]="5">5°</option>
        <option [ngValue]="6">6°</option>
      </select>
    </div>
    <div *ngIf="errors.grado">
      {{ errors.grado }}
    </div>
    <label for="seccion">Sección</label>
    <div>
      <select name="seccion" id="seccion" [(ngModel)]="prestamo.seccion">
        <option value="undefined">-- Seleccionar --</option>
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="E">E</option>
        <option value="F">F</option>
        <option value="G">G</option>
        <option value="H">H</option>
        <option value="I">I</option>
        <option value="J">J</option>
        <option value="K">K</option>
      </select>
    </div>
    <div *ngIf="errors.seccion">
      {{ errors.seccion }}
    </div>
    <label for="codigo">Código del Material</label>
    <div>
      <input type="text" id="codigo" name="codigo" [(ngModel)]="codigo" />
    </div>
    <div>
      <button type="submit" (click)="getOneByCodigo()" [disabled]="!codigo">
        Buscar Material
      </button>
    </div>
    <div>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Código</th>
            <th>Nombre</th>
            <th>Medidas</th>
            <th>Area</th>
            <th>Disponibles</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ material.id }}</td>
            <td>{{ material.codigo }}</td>
            <td>{{ material.nombre }}</td>
            <td>{{ material.medidas }}</td>
            <td>{{ material.area.nombre }}</td>
            <td>{{ ejemplaresDisponibles }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div>
      <label for="cantidad">Cantidad</label>
      <div>
        <input
          type="number"
          id="cantidad"
          name="cantidad"
          [(ngModel)]="cantidad"
          min="1"
        />
      </div>
      <div *ngIf="cantidad <= 0">La cantidad mínima es 1</div>
      <div>
        <button
          type="submit"
          (click)="getAllByMaterial()"
          [disabled]="!cantidad"
        >
          Buscar Ejemplares
        </button>
      </div>
    </div>
    <div>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Código Material</th>
            <th>Título</th>
            <th>Número</th>
            <th>Estado</th>
            <th>Eliminar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let ejemplar of ejemplares">
            <td>{{ ejemplar.id }}</td>
            <td>{{ ejemplar.material.codigo }}</td>
            <td>{{ ejemplar.material.nombre }}</td>
            <td>{{ ejemplar.numero }}</td>
            <td>{{ ejemplar.estado }}</td>
            <td>
              <button
                class="btn btn-danger btn-sm"
                (click)="deleteEjemplar(ejemplar.id)"
              >
                X
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div *ngIf="errors.detalle">
      {{ errors.detalle }}
    </div>
    <div>
      <textarea
        id="descripcion"
        name="descripcion"
        [(ngModel)]="prestamo.descripcion"
      >
      </textarea>
    </div>
    <div *ngIf="errors.descripcion">
      {{ errors.descripcion }}
    </div>
    <div>
      <button type="submit" (click)="save()">Guardar</button>
    </div>
  </form>
</div>
 -->

<mat-card>
  <div class="bootstrap-wrapper">
    <div class="container">
      <div class="row" style="margin-top: 20px">
        <div class="col-md-6 offset-md-3">
          <h1 class="text-center">Formulario de Prestamo de materiales</h1>
          <div>
            <mat-form-field class="demo-input">
              <mat-label>Buscar Docente</mat-label>
              <input
                matInput
                [(ngModel)]="dni"
                placeholder="Ingrese el dni"
                #input
              />
            </mat-form-field>
            <button
              mat-raised-button
              class="demo-button"
              type="button"
              (click)="getOneByDni()"
              [disabled]="!dni"
            >
              Buscar Docente
            </button>
            <h4 class="text-center" *ngIf="docente.id">
              Docente: {{ docente.nombre }} {{ docente.apellido }}
            </h4>
            <mat-hint *ngIf="errors.docente" style="color: red">
              {{ errors.docente }}
            </mat-hint>
          </div>
          <mat-form-field appearance="fill" class="demo-input">
            <mat-label>Grado</mat-label>
            <mat-select
              [(ngModel)]="prestamo.grado"
              name="grado"
              [disabled]="!docente.id"
            >
              <mat-option [value]="undefined">-- Seleccionar --</mat-option>
              <mat-option [value]="1">1°</mat-option>
              <mat-option [value]="2">2°</mat-option>
              <mat-option [value]="3">3°</mat-option>
              <mat-option [value]="4">4°</mat-option>
              <mat-option [value]="5">5°</mat-option>
              <mat-option [value]="6">6°</mat-option>
            </mat-select>
            <mat-hint *ngIf="errors.grado" style="color: red">
              {{ errors.grado }}
            </mat-hint>
          </mat-form-field>
          <mat-form-field appearance="fill" class="demo-input">
            <mat-label>Seccion</mat-label>
            <mat-select
              [(ngModel)]="prestamo.seccion"
              name="seccion"
              [disabled]="!docente.id"
            >
              <mat-option [value]="undefined">-- Seleccionar --</mat-option>
              <mat-option value="A">A</mat-option>
              <mat-option value="B">B</mat-option>
              <mat-option value="C">C</mat-option>
              <mat-option value="D">D</mat-option>
              <mat-option value="E">E</mat-option>
              <mat-option value="F">F</mat-option>
              <mat-option value="G">G</mat-option>
              <mat-option value="H">H</mat-option>
              <mat-option value="I">I</mat-option>
              <mat-option value="J">J</mat-option>
              <mat-option value="K">K</mat-option>
            </mat-select>
            <mat-hint *ngIf="errors.grado" style="color: red">
              {{ errors.grado }}
            </mat-hint>
          </mat-form-field>
          <div>
            <mat-form-field class="demo-input">
              <mat-label>Buscar Libro</mat-label>
              <input
                matInput
                [(ngModel)]="codigo"
                placeholder="Ingrese el codigo"
                [disabled]="
                  !docente.id || prestamo.grado === 0 || !prestamo.seccion
                "
                #input
              />
            </mat-form-field>
            <button
              mat-raised-button
              class="demo-button"
              type="button"
              (click)="getOneByCodigo()"
              [disabled]="!codigo"
            >
              Buscar Material
            </button>
            <h4 class="text-center" *ngIf="material.id">
              Material: {{ material.nombre }}
            </h4>
            <h4 class="text-center" *ngIf="material.id">
              Disponibles: {{ ejemplaresDisponibles }}
            </h4>
          </div>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Cantidad</mat-label>
            <input
              required
              type="number"
              min="1"
              [(ngModel)]="cantidad"
              name="cantidad"
              matInput
              placeholder="Ingrese la cantidad de Ejemplares"
              [disabled]="!material.id"
            />
          </mat-form-field>
          <button
            mat-raised-button
            class="demo-button"
            type="submit"
            (click)="getAllByMaterial()"
            [disabled]="cantidad < 1"
          >
            Buscar por Libro
          </button>
          <br /><br />
          <table
            mat-table
            [dataSource]="dataSource"
            class="mat-elevation-z8 demo-table"
          >
            <ng-container matColumnDef="codigo">
              <th mat-header-cell *matHeaderCellDef>Codigo de Ejemplar</th>
              <td mat-cell *matCellDef="let ejemplar">
                {{ ejemplar.libro.codigo }}-{{ ejemplar.numero }}
              </td>
            </ng-container>
            <ng-container matColumnDef="titulo">
              <th mat-header-cell *matHeaderCellDef>Titulo</th>
              <td mat-cell *matCellDef="let ejemplar">
                {{ ejemplar.libro.titulo }}
              </td>
            </ng-container>
            <ng-container matColumnDef="estado">
              <th mat-header-cell *matHeaderCellDef>Estado</th>
              <td
                mat-cell
                *matCellDef="let ejemplar"
                class="bueno"
                [ngClass]="{ malo: ejemplar.estado === 'MALO' }"
              >
                <b>{{ ejemplar.estado }}</b>
              </td>
            </ng-container>
            <ng-container matColumnDef="eliminar">
              <th mat-header-cell *matHeaderCellDef>Eliminar</th>
              <td mat-cell *matCellDef="let ejemplar">
                <button
                  mat-raised-button
                  color="warn"
                  type="button"
                  (click)="deleteEjemplar(ejemplar.id)"
                >
                  X
                </button>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="columnas"></tr>
            <tr mat-row *matRowDef="let row; columns: columnas"></tr>
          </table>
          <mat-hint *ngIf="errors.detalle" style="color: red">
            {{ errors.detalle }}
          </mat-hint>
          <br />
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Descripcion</mat-label>
            <textarea
              type="text"
              [(ngModel)]="prestamo.descripcion"
              name="descripcion"
              matInput
              placeholder="Ingrese la descripcion del Prestamo"
            ></textarea>
            <mat-hint *ngIf="errors.descripcion" style="color: red">
              {{ errors.descripcion }}
            </mat-hint>
          </mat-form-field>
          <br /><br />
          <div class="container text-center">
            <button
              mat-raised-button
              color="primary"
              type="submit"
              (click)="save()"
            >
              Guardar
            </button>
            <button
              mat-raised-button
              color="warn"
              type="button"
              [routerLink]="['/prestamos-materiales']"
              style="margin-left: 20px"
            >
              Cancelar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br />
</mat-card>
